import "./main.scss";
import { useState } from "react";

const FormLogin = ({ showForm }) => {
  const [showPassword, setShowPassword] = useState(false);
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");

  const handleShowPassword = () => {
    setShowPassword(!showPassword);
  };

  const handleSenha = (e) => {
    setPassword(e.target.value);
    document.querySelector("#erro").innerHTML = "";
  };

  const handleEmail = (e) => {
    setEmail(e.target.value);
    document.querySelector("#erro").innerHTML = "";
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    const reSenha = RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\W+).{6,30}$/);
    const reEmail = RegExp(
      /^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/
    );

    if (!password.match(reSenha) || !email.match(reEmail)) {
      document.querySelector("#erro").innerHTML = "Email ou senha invalidos";
      return;
    }
  };

  return (
    <div className="form-loguin">
      <h2 className="titulo">
        Bem-vindo<span>.</span>
      </h2>
      <p className="subtitulo">
        informe as suas credenciais de acesso ao portal
      </p>
      <form onSubmit={(event) => handleSubmit(event)} className="form">
        <fieldset>
          <input
            type="text"
            placeholder="Informe seu e-mail"
            onChange={(e) => handleEmail(e)}
          />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="17"
            height="17"
            viewBox="0 0 17 17"
            fill="none"
          >
            <path
              d="M8.50037 0C6.24688 0.0024367 4.08638 0.898482 2.49292 2.49153C0.899455 4.08458 0.00317821 6.24452 0.000740883 8.49743C-0.0885052 15.2763 7.90469 19.423 13.3877 15.449C13.4664 15.3966 13.5339 15.329 13.5861 15.2501C13.6384 15.1712 13.6742 15.0826 13.6916 14.9896C13.709 14.8966 13.7076 14.8011 13.6874 14.7086C13.6673 14.6162 13.6288 14.5287 13.5743 14.4514C13.5197 14.3741 13.4503 14.3085 13.3699 14.2584C13.2896 14.2084 13.2001 14.175 13.1066 14.1601C13.0132 14.1453 12.9177 14.1493 12.8258 14.1719C12.7339 14.1946 12.6475 14.2354 12.5717 14.292C8.00456 17.601 1.34652 14.1468 1.41735 8.49743C1.8062 -0.896479 15.196 -0.894355 15.5834 8.49743V9.91367C15.5834 10.2893 15.4341 10.6495 15.1685 10.9151C14.9028 11.1807 14.5425 11.3299 14.1668 11.3299C13.7911 11.3299 13.4308 11.1807 13.1651 10.9151C12.8994 10.6495 12.7502 10.2893 12.7502 9.91367V8.49743C12.5717 2.88275 4.42834 2.88346 4.25056 8.49743C4.2588 9.3585 4.52782 10.1969 5.02217 10.902C5.51651 11.6072 6.21298 12.1461 7.01977 12.4476C7.82656 12.7492 8.70582 12.7992 9.54165 12.5912C10.3775 12.3833 11.1306 11.9269 11.7019 11.2825C12.0092 11.8246 12.4867 12.2503 13.0605 12.4937C13.6343 12.7371 14.2723 12.7844 14.8758 12.6285C15.4793 12.4726 16.0145 12.1221 16.3985 11.6313C16.7825 11.1405 16.9939 10.5368 17 9.91367V8.49743C16.9976 6.24452 16.1013 4.08458 14.5078 2.49153C12.9144 0.898482 10.7539 0.0024367 8.50037 0V0ZM8.50037 11.3299C7.74896 11.3299 7.02832 11.0315 6.49699 10.5003C5.96566 9.9691 5.66716 9.24865 5.66716 8.49743C5.66716 7.74621 5.96566 7.02576 6.49699 6.49457C7.02832 5.96338 7.74896 5.66496 8.50037 5.66496C9.25179 5.66496 9.97242 5.96338 10.5038 6.49457C11.0351 7.02576 11.3336 7.74621 11.3336 8.49743C11.3336 9.24865 11.0351 9.9691 10.5038 10.5003C9.97242 11.0315 9.25179 11.3299 8.50037 11.3299Z"
              fill="#B7B7B7"
            />
          </svg>
        </fieldset>
        <fieldset>
          <input
            type={showPassword ? "text" : "password"}
            placeholder="Informe sua senha"
            onChange={(e) => handleSenha(e)}
          />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="15"
            viewBox="0 0 20 15"
            fill="none"
            onClick={() => handleShowPassword()}
          >
            <path
              d="M18.6801 5.42857C17.4354 3.40128 14.6039 0 9.63439 0C4.66489 0 1.83342 3.40128 0.58864 5.42857C0.203831 6.05097 0 6.76825 0 7.5C0 8.23175 0.203831 8.94903 0.58864 9.57143C1.83342 11.5987 4.66489 15 9.63439 15C14.6039 15 17.4354 11.5987 18.6801 9.57143C19.0649 8.94903 19.2688 8.23175 19.2688 7.5C19.2688 6.76825 19.0649 6.05097 18.6801 5.42857ZM17.3118 8.73114C16.2427 10.4695 13.823 13.3949 9.63439 13.3949C5.44578 13.3949 3.02604 10.4695 1.95702 8.73114C1.7284 8.36119 1.6073 7.93489 1.6073 7.5C1.6073 7.06511 1.7284 6.63881 1.95702 6.26886C3.02604 4.5305 5.44578 1.60514 9.63439 1.60514C13.823 1.60514 16.2427 4.52729 17.3118 6.26886C17.5404 6.63881 17.6615 7.06511 17.6615 7.5C17.6615 7.93489 17.5404 8.36119 17.3118 8.73114Z"
              fill="#B7B7B7"
            />
            <path
              d="M9.63443 3.4873C8.84076 3.4873 8.06492 3.72265 7.40501 4.16359C6.7451 4.60453 6.23077 5.23125 5.92704 5.9645C5.62332 6.69775 5.54385 7.5046 5.69869 8.28301C5.85353 9.06143 6.23571 9.77645 6.79692 10.3377C7.35812 10.8989 8.07314 11.281 8.85156 11.4359C9.62997 11.5907 10.4368 11.5113 11.1701 11.2075C11.9033 10.9038 12.53 10.3895 12.971 9.72956C13.4119 9.06965 13.6473 8.29381 13.6473 7.50015C13.646 6.43627 13.2228 5.41632 12.4705 4.66405C11.7182 3.91177 10.6983 3.48858 9.63443 3.4873ZM9.63443 9.90785C9.15823 9.90785 8.69272 9.76664 8.29678 9.50208C7.90083 9.23752 7.59223 8.86149 7.41 8.42154C7.22776 7.98158 7.18008 7.49748 7.27298 7.03043C7.36589 6.56338 7.5952 6.13437 7.93192 5.79764C8.26864 5.46092 8.69766 5.23161 9.16471 5.1387C9.63175 5.0458 10.1159 5.09348 10.5558 5.27572C10.9958 5.45795 11.3718 5.76655 11.6364 6.1625C11.9009 6.55844 12.0421 7.02395 12.0421 7.50015C12.0421 8.13871 11.7885 8.75112 11.3369 9.20265C10.8854 9.65418 10.273 9.90785 9.63443 9.90785Z"
              fill="#B7B7B7"
            />
          </svg>
        </fieldset>
        <p className="msg-erro" id="erro"></p>
        <button className="btn-submit" type="submit">
          entrar
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="13"
            height="13"
            viewBox="0 0 13 13"
            fill="none"
          >
            <g clipPath="url(#clip0_25_6732)">
              <path
                d="M10.2375 -0.0003782H2.7625C2.03722 -0.00687753 1.339 0.274651 0.821081 0.782416C0.303161 1.29018 0.00786242 1.98269 0 2.70795L0 4.33295C0 4.47661 0.0570683 4.61439 0.158651 4.71597C0.260233 4.81755 0.398008 4.87462 0.541667 4.87462C0.685326 4.87462 0.823101 4.81755 0.924683 4.71597C1.02627 4.61439 1.08333 4.47661 1.08333 4.33295V2.70795C1.09103 2.26996 1.27214 1.8529 1.58693 1.54827C1.90172 1.24363 2.32449 1.07629 2.7625 1.08296H10.2375C10.6755 1.07629 11.0983 1.24363 11.4131 1.54827C11.7279 1.8529 11.909 2.26996 11.9167 2.70795V10.2913C11.909 10.7293 11.7279 11.1463 11.4131 11.451C11.0983 11.7556 10.6755 11.923 10.2375 11.9163H2.7625C2.32449 11.923 1.90172 11.7556 1.58693 11.451C1.27214 11.1463 1.09103 10.7293 1.08333 10.2913V8.66629C1.08333 8.52263 1.02627 8.38485 0.924683 8.28327C0.823101 8.18169 0.685326 8.12462 0.541667 8.12462C0.398008 8.12462 0.260233 8.18169 0.158651 8.28327C0.0570683 8.38485 0 8.52263 0 8.66629L0 10.2913C0.00786242 11.0166 0.303161 11.7091 0.821081 12.2168C1.339 12.7246 2.03722 13.0061 2.7625 12.9996H10.2375C10.9628 13.0061 11.661 12.7246 12.1789 12.2168C12.6968 11.7091 12.9921 11.0166 13 10.2913V2.70795C12.9921 1.98269 12.6968 1.29018 12.1789 0.782416C11.661 0.274651 10.9628 -0.00687753 10.2375 -0.0003782Z"
                fill="#FBFBFB"
              />
              <path
                d="M1.625 6.49985C1.625 6.64351 1.68207 6.78129 1.78365 6.88287C1.88523 6.98445 2.02301 7.04152 2.16667 7.04152L9.31017 7.02527L6.96854 9.3669C6.91681 9.41686 6.87554 9.47663 6.84715 9.54272C6.81876 9.6088 6.80382 9.67988 6.8032 9.7518C6.80257 9.82373 6.81628 9.89505 6.84351 9.96162C6.87075 10.0282 6.91097 10.0887 6.96183 10.1395C7.01269 10.1904 7.07316 10.2306 7.13973 10.2578C7.2063 10.2851 7.27763 10.2988 7.34955 10.2982C7.42147 10.2975 7.49255 10.2826 7.55864 10.2542C7.62472 10.2258 7.68449 10.1845 7.73446 10.1328L10.2185 7.64873C10.5232 7.344 10.6943 6.93075 10.6943 6.49985C10.6943 6.06896 10.5232 5.65571 10.2185 5.35098L7.73554 2.8669C7.63338 2.76823 7.49656 2.71363 7.35453 2.71486C7.21251 2.7161 7.07665 2.77307 6.97622 2.87349C6.87579 2.97392 6.81883 3.10978 6.81759 3.2518C6.81636 3.39383 6.87096 3.53065 6.96962 3.63281L9.27821 5.94194L2.16667 5.95819C2.02301 5.95819 1.88523 6.01526 1.78365 6.11684C1.68207 6.21842 1.625 6.3562 1.625 6.49985Z"
                fill="#FBFBFB"
              />
            </g>
            <defs>
              <clipPath id="clip0_25_6732">
                <rect width="13" height="13" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
      </form>
      <div className="recuperar-senha" onClick={() => showForm()}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 14 14"
          fill="none"
        >
          <g clipPath="url(#clip0_25_6737)">
            <path
              d="M7.00008 8.74994C6.84537 8.74994 6.697 8.68848 6.5876 8.57908C6.47821 8.46968 6.41675 8.32131 6.41675 8.1666C6.43841 7.78543 6.55437 7.4156 6.75423 7.09031C6.95409 6.76501 7.2316 6.49443 7.56183 6.30285C7.77762 6.18459 7.95035 6.00093 8.05516 5.7783C8.15998 5.55566 8.19149 5.30553 8.14517 5.06385C8.10023 4.83302 7.98739 4.62086 7.82111 4.45458C7.65482 4.28829 7.44267 4.17545 7.21183 4.13052C7.04332 4.09942 6.87003 4.10582 6.70428 4.14926C6.53853 4.19271 6.38438 4.27213 6.25279 4.38189C6.1212 4.49165 6.01541 4.62905 5.94292 4.78432C5.87044 4.93959 5.83305 5.10892 5.83342 5.28027C5.83342 5.43498 5.77196 5.58335 5.66256 5.69275C5.55317 5.80214 5.40479 5.8636 5.25008 5.8636C5.09537 5.8636 4.947 5.80214 4.8376 5.69275C4.72821 5.58335 4.66675 5.43498 4.66675 5.28027C4.66669 4.93946 4.74129 4.60277 4.8853 4.29389C5.02932 3.985 5.23925 3.71141 5.50033 3.49235C5.74986 3.28375 6.04023 3.12962 6.35282 3.03985C6.66542 2.95008 6.99333 2.92664 7.31551 2.97105C7.63769 3.01546 7.94704 3.12673 8.22369 3.29773C8.50034 3.46872 8.73818 3.69566 8.92197 3.96399C9.10575 4.23231 9.23141 4.53609 9.29089 4.85584C9.35036 5.17559 9.34233 5.50423 9.26732 5.82069C9.19231 6.13716 9.05197 6.43444 8.85531 6.69347C8.65864 6.95251 8.41 7.16757 8.12533 7.32485C7.97784 7.41574 7.85259 7.53853 7.75881 7.6842C7.66503 7.82987 7.60509 7.99472 7.58342 8.1666C7.58342 8.32131 7.52196 8.46968 7.41256 8.57908C7.30317 8.68848 7.15479 8.74994 7.00008 8.74994ZM7.46267 13.8599C8.72267 13.3536 12.8334 11.3627 12.8334 7.02502V4.0086C12.8341 3.39553 12.6412 2.79788 12.2824 2.30079C11.9236 1.80369 11.417 1.43251 10.8349 1.2401L7.18383 0.0296853C7.06464 -0.0105462 6.93553 -0.0105462 6.81633 0.0296853L3.16525 1.2401C2.58315 1.43251 2.0766 1.80369 1.71777 2.30079C1.35893 2.79788 1.1661 3.39553 1.16675 4.0086V7.02502C1.16675 10.8529 5.253 13.1944 6.506 13.8209C6.65748 13.9121 6.82531 13.9729 7.00008 13.9999C7.16164 13.9824 7.31851 13.9349 7.46267 13.8599ZM10.4674 2.34727C10.8166 2.46301 11.1204 2.68582 11.3356 2.98406C11.5509 3.28229 11.6668 3.64078 11.6667 4.0086V7.02502C11.6667 10.6318 8.116 12.3398 7.0275 12.7773C5.92617 12.2266 2.33342 10.1844 2.33342 7.02502V4.0086C2.33337 3.64078 2.44922 3.28229 2.66452 2.98406C2.87981 2.68582 3.18361 2.46301 3.53275 2.34727L7.00008 1.1981L10.4674 2.34727ZM7.00008 9.9166C6.88471 9.9166 6.77193 9.95081 6.676 10.0149C6.58007 10.079 6.5053 10.1701 6.46115 10.2767C6.417 10.3833 6.40545 10.5006 6.42796 10.6137C6.45047 10.7269 6.50602 10.8308 6.5876 10.9124C6.66918 10.994 6.77312 11.0496 6.88628 11.0721C6.99944 11.0946 7.11672 11.083 7.22332 11.0389C7.32991 10.9947 7.42101 10.9199 7.48511 10.824C7.5492 10.7281 7.58342 10.6153 7.58342 10.4999C7.58342 10.3452 7.52196 10.1969 7.41256 10.0875C7.30317 9.97806 7.15479 9.9166 7.00008 9.9166Z"
              fill="#F21A05"
            />
          </g>
          <defs>
            <clipPath id="clip0_25_6737">
              <rect width="14" height="14" fill="white" />
            </clipPath>
          </defs>
        </svg>
        <p>Esqueceu a senha?</p>
      </div>
    </div>
  );
};

export default FormLogin;
